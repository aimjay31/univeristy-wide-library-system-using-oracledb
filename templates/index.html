{% extends "layout.html" %}

{% block content %}
<h1>Search Manuscripts</h1>

<form method="GET" action="/" class="search-box">

    <select name="sort" onchange="this.form.submit()">
        <option value="">Sort By</option>
        <option value="title">Title</option>
        <option value="author">Author</option>
        <option value="university">University</option>
        <option value="department">Department</option>
        <option value="year_published">Year Published</option>
    </select>

    <select name="filter">
        <option value="title">Search by Title</option>
        <option value="author">Search by Author</option>
        <option value="university">Search by University</option>
        <option value="department">Search by Department</option>
        <option value="year_published">Search by Year</option>
    </select>

    <input type="text" name="keyword" placeholder="Enter search keyword">
    <button type="submit">Search</button>
</form>

<br>
<table>
    <tr>
        <th>Book ID</th>
        <th>Title</th>
        <th>Author</th>
        <th>University</th>
        <th>Department</th>
        <th>Year Published</th>
        <th>Actions</th>
    </tr>

    {% for b in books %}
    <tr>
        <td>{{ b.book_id }}</td>
        <td>{{ b.title }}</td>
        <td>{{ b.author }}</td>
        <td>{{ b.university }}</td>
        <td>{{ b.department }}</td>
        <td>{{ b.year_published }}</td>
        <td>
            <form method="POST" action="{{ url_for('user_library.add_to_library', book_id=b.book_id) }}">
                <button type="submit">Add To Library</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
