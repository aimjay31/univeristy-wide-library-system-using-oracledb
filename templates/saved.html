{% extends "layout.html" %}
{% block content %}

<h1>My Library</h1>

<h2>Local Books</h2>
{% if local_books %}
<table>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>University</th>
        <th>Department</th>
        <th>Year</th>
        <th>Source</th>
        <th>Actions</th>
    </tr>
    {% for book in local_books %}
    <tr onclick="window.open('{{ url_for('user_library.view_pdf', book_id=book.book_id) }}', '_blank');">
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.university }}</td>
        <td>{{ book.department }}</td>
        <td>{{ book.year_published }}</td>
        <td>{{ book.source }}</td>
        <td>
            <form method="POST" action="{{ url_for('user_library.remove_from_library', book_id=book.book_id) }}">
                <button type="submit">Remove</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No local books in your library.</p>
{% endif %}

<h2>Remote Books</h2>
{% if remote_books %}
<table>
    <tr>
        <th>Title</th>
        <th>Author</th>
        <th>University</th>
        <th>Department</th>
        <th>Year</th>
        <th>Source</th>
        <th>Actions</th>
    </tr>
    {% for book in remote_books %}
    <tr onclick="window.open('{{ url_for('user_library.view_pdf', book_id=book.book_id) }}', '_blank');">
        <td>{{ book.title }}</td>
        <td>{{ book.author }}</td>
        <td>{{ book.university }}</td>
        <td>{{ book.department }}</td>
        <td>{{ book.year_published }}</td>
        <td>{{ book.source }}</td>
        <td>
            <form method="POST" action="{{ url_for('user_library.remove_from_library', book_id=book.book_id) }}">
                <button type="submit">Remove</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>
{% else %}
<p>No remote books added yet.</p>
{% endif %}

{% endblock %}
