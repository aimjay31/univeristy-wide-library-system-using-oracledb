Tables



-- USERS TABLE


CREATE TABLE users (
    user_id        NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name           VARCHAR2(100) NOT NULL,
    email          VARCHAR2(100) NOT NULL UNIQUE,
    password_hash  VARCHAR2(255) NOT NULL,
    role           VARCHAR2(20) NOT NULL,
    profile_image  BLOB,
    created_at     TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);




-- UNIVERSITY BOOKS


CREATE TABLE university_books (
    book_id         NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    title           VARCHAR2(150),
    author          VARCHAR2(100),
    university      VARCHAR2(100),
    department      VARCHAR2(100),
    year_published  NUMBER(4),
    availability    VARCHAR2(20),
    pdf_file        BLOB,
    uploaded_by     NUMBER,
    CONSTRAINT fk_uploaded_by FOREIGN KEY (uploaded_by)
        REFERENCES users(user_id)
);



-- USER LIBRARY


CREATE TABLE user_library (
    user_id   NUMBER NOT NULL,
    book_id   NUMBER NOT NULL,
    added_at  DATE DEFAULT SYSDATE,
    CONSTRAINT pk_user_library PRIMARY KEY (user_id, book_id),
    CONSTRAINT fk_user_library_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),
    CONSTRAINT fk_user_library_book FOREIGN KEY (book_id)
        REFERENCES university_books(book_id)
);
